{{ range $cd := .Values.customDomain -}}
---
apiVersion: managed.openshift.io/v1alpha1
kind: CustomDomain
metadata:
  name: "{{ $ns.name }}"
  annotations:
    helm.sh/hook: post-install
spec:
  domain: "{{ $ns.route53_zone}}"
  scope: External
  loadBalancerType: "{{ $ns.type }}"
  certificate:
    name: "{{ $ns.name }}"-tls
    namespace: custom-ingress
  routeSelector: 
    matchLabels:
     route: acme
  namespaceSelector: 
    matchLabels:
     type: sharded
---
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZPVENDQXlHZ0F3SUJBZ0lVWGFLanBwWEk1RFlDMU5YSGRic3JhMUlsVkZ3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0dqRVlNQllHQTFVRUF3d1BZWEJ3Y3k1bWIzTjBaWEl1WTI5dE1CNFhEVEl6TURreU5UQXhOVGt5T0ZvWApEVE16TURreU1qQXhOVGt5T0Zvd0dqRVlNQllHQTFVRUF3d1BZWEJ3Y3k1bWIzTjBaWEl1WTI5dE1JSUNJakFOCkJna3Foa2lHOXcwQkFRRUZBQU9DQWc4QU1JSUNDZ0tDQWdFQWsvYjFzenhZelI4OWRSZyt0UzIxMUFnK2Y0RVEKUDJUU1NNQy9sOUo4L1NqU0sxd055TTY1OSs4eTBDRWozdWxnb0N3YnVGZmJDSDdkR1RqM2YyYmdTWWdCTm96egpWZm1tKy9POXp0dTZxYnZMaGo5WWFRVDIycVBCQy9EWHNiZnlwOEZtZU5hSENZNHJSUUhlUnF1Mml2aVpaeXJaClBWZWthTVZKbysvM3hIYUhzazZlY0NRbzh0RCtJTHJORGRZZVNWejFUb2lZU2RaOGdqUmpXb013Q1pWQ2pxNGkKZjBtTjBEN3BXcVRsZldNemZGdXl1NU1sK2FKdHRoWmR2QitqbDVlQ3libkxtSER2UEVneUdMd1ZjY2FNckphNwpSUXFhbjFaZkZVRC9EdzJBYlJXOWFtczl3bTJLNEV3Wnl0T2NZOXJaS1N1M1pVcVdHYW9xSjVmelNQS0ViNUtpCjlxZVJzNHFSeUt1dkErMUt0OEtlVVF4RVYxcXpuK0E2UEdhR0F6L2gyVXRjWW1URGpRL2NOQVBLbENNQmtycnAKN0VuWTNyczErNXVBSWZvLzFURnhvUW50S1RJZFVIRHMxTWVQWjYvQStQRFlrQ3BRRnBjNHM1MXBzM3R5dDdPagoyeXAyTzZYejJMaXVVeWN6RHl4Q2NoTmVyeUFWWmx6RUViTjlCTW9Pb0htZ0dlWE5PRmVPS3JHOEVCNUhDaU4vCmJiVUdXN0VKSVB0eGNGdXk3bnZub1pIMEN4ZjkyMjIvQWxqNDdQUXNhRUxVRys0bFp6Nkg1WXU0b2w2RFUwbWMKNWlRdXQrcUlHNllSK2xyaE1OcXB2bXZicWp2ZVk2TzhFQXpFYlU1eC94UFdNNkwwK25wM0VmZG92TDcwaXgxSQpuSnlMUlhFTmoxLzFtVGtDQXdFQUFhTjNNSFV3SFFZRFZSME9CQllFRkZWU0xSV20rRWM0di91OHpKVEZZelNTCnJpcXdNQjhHQTFVZEl3UVlNQmFBRkZWU0xSV20rRWM0di91OHpKVEZZelNTcmlxd01BOEdBMVVkRXdFQi93UUYKTUFNQkFmOHdJZ1lEVlIwUkJCc3dHWUlSS2k1aGNIQnpMbVp2YzNSbGNpNWpiMjJIQkFvQUFBRXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0lCQUpFTThHSW4rYVQyK0pNRXhMVG9EYTZuN0xBUVlRMjNvK0Z5MDlQcE4xUkFsVGM5CnNwdTZKbXNmL3V2K2NQckNPM2VzVXgyUmVHM1pFOCsvc1kzMVY0OXBiS3VGRGJnblY4MDJ1U3Mrblkvc0FkcmMKRys0V29EL21TSHBDOCt6aEV6NjQwQVJOME9Sc25NeDZkdkZ6TlFMYm5ncDNNQmZGVE5YNFNNMHVhY2Jram1uZQpIVU9Ja0ZGUE1ycVhBTXBrNGZST2pDYWtYKzJoU3JBZnNjLzRoSURaY3pKeVhVUjRrb0wyS1ErQzUwZHhmV0wrCmpwbW1QT2RxZXFpQXhQSjlmL3BDa2tvNW40SCtiVU1LajEraU8wWkdPMFlWOWFhT0p2MnUrSGIyQUNUQjJlNHMKakZhTSt0VFhhVnhhbkZCcVZCalJldGRQTVY2aVduaWF4eXlzMjJWSmxiUTQ0MC9MeGZ1aUtvdXBTTW1GcFc4agpkVzlzeUR3TjI0QWdzOFhiaWIyY1BvdWUvdXVwaTd5NXpnYWR6RndIUjgyS1N0N21JRGtmVmszNmpMc2NmWjhXCmJBaUJjcjIyUkxma2R2NFJyOUhaTGg5bUlSQk9jM3lIblpjcXpwaDJBOEIzajlLY0xLYmhJeDJZTTZuaGdzeFQKYlR1WXVYL25pam1VMW9jMEtxcFNpVE9QN2ZlRjMzSmNtWDFocWU1cTJOdWNocXlkRjZPZlhaL1AzM1hKaFhvUQoxOWlsQk1nUytKKzFlb2wzb21vK2hZSkpNZTlpaWFPSmltcG9BTVFnU0MxTVlpalhrYVA4WE1IQWppUldIZ1hLClZWQS90YTg0OEZHSmp0VEhwd3ZNWTBFWnhiNG5KVFlHSDRDd3pOVGtWdVZybG1wbDNiUVZCcjVtbzVlUgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRUUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Nzd2dna25BZ0VBQW9JQ0FRQ1Q5dld6UEZqTkh6MTEKR0Q2MUxiWFVDRDUvZ1JBL1pOSkl3TCtYMG56OUtOSXJYQTNJenJuMzd6TFFJU1BlNldDZ0xCdTRWOXNJZnQwWgpPUGQvWnVCSmlBRTJqUE5WK2FiNzg3M08yN3FwdTh1R1AxaHBCUGJhbzhFTDhOZXh0L0tud1daNDFvY0pqaXRGCkFkNUdxN2FLK0psbkt0azlWNlJveFVtajcvZkVkb2V5VHA1d0pDankwUDRndXMwTjFoNUpYUFZPaUpoSjFueUMKTkdOYWd6QUpsVUtPcmlKL1NZM1FQdWxhcE9WOVl6TjhXN0s3a3lYNW9tMjJGbDI4SDZPWGw0TEp1Y3VZY084OApTRElZdkJWeHhveXNscnRGQ3BxZlZsOFZRUDhQRFlCdEZiMXFhejNDYllyZ1RCbkswNXhqMnRrcEs3ZGxTcFlaCnFpb25sL05JOG9SdmtxTDJwNUd6aXBISXE2OEQ3VXEzd3A1UkRFUlhXck9mNERvOFpvWURQK0haUzF4aVpNT04KRDl3MEE4cVVJd0dTdXVuc1NkamV1elg3bTRBaCtqL1ZNWEdoQ2UwcE1oMVFjT3pVeDQ5bnI4RDQ4TmlRS2xBVwpseml6bldtemUzSzNzNlBiS25ZN3BmUFl1SzVUSnpNUExFSnlFMTZ2SUJWbVhNUVJzMzBFeWc2Z2VhQVo1YzA0ClY0NHFzYndRSGtjS0kzOXR0UVpic1FrZyszRndXN0x1ZStlaGtmUUxGLzNiYmI4Q1dQanM5Q3hvUXRRYjdpVm4KUG9mbGk3aWlYb05UU1p6bUpDNjM2b2dicGhINld1RXcycW0rYTl1cU85NWpvN3dRRE1SdFRuSC9FOVl6b3ZUNgplbmNSOTJpOHZ2U0xIVWljbkl0RmNRMlBYL1daT1FJREFRQUJBb0lDQUFESUtBaE5RVW9BWFN2eVVMaHMrbEpzCjVXd3JmbUNkbzdvZ2hBRkZWRXNrRk5HZDdFSEVlUU11OGtNamk4ZElWSzRUVEROckNnbVFCUzdQYWt1UHZsZnMKRlNVMTZLMkdYVWVSTTRDUDJQQVlsUjRya3BCVU1tNFZQNFhEK20wRkVmSkU1ZXNuNUp5YTRTWXMyazhCWU5oTAp3ZEszSytad1YzZVZ2V0lZUUwxT1g3c3dqNWpQVWRnL1VqVDQ4QklaL293Yk4yejRhMSt0Q0VEZ0RoUnV3SmpMCnE4U3JQaHdJUUtSVE1YbHU3VjZsVmRwYkJtS0o0UDZxZXpDZ1k4MmdvMEpiZ0tTQ0VYcWJUUjlJQ0hmb3V3c1AKbXlMSE5CU2x5eUc0VXovZEhFY05GY2RMc3dhcDJHaEQzYjZtb1ZhRmJXTk5zTi9RRkpYZ3ZhdkpJa1k5SEtqNwo2clh1dkh6OU5qRnVNWGVud1F5dm5iRGtLRmgwdHM2cHB3QmVPN01rNnhUYjM4ZGNaRWxsaFk3d01PVHJIeWs0ClgvYzRWR3NFNWprMzhkN3N3WEpkYS92T1J6VzNsQk1ZSytxQ2lHV3ZWRks0SG4yMVpEemdyNHZrWE5OMHRxbXUKWjkwS2xsZ0thT0t0d3FBL2Vod3d2Ty80dkdPem92azN0RzExQ3VZWmthQ3h5T0NHS3JtRWhHMkhrNm9SeXZwbgpJTnAzQitDc1lQOTd1U21DOGV0REJzeTNrRkRjT1NRTThiMVVudUp0bGNNbWdUTUdDd2RCcjlKZjg5SW95TzZDCm15UjloNFEwcmw4TmRlSHc4ZkdCTTNKdHpPYVBSLzk5ZzNmODhXV1BtTnFkb1cxQmROVjQxVE9sUHdlMnhkekYKSjkxeGxDckI4a1FzczRVdzlSZUJBb0lCQVFETUdMb0Z0U1dQVitkRmRXUzlDZWlDNU9tL1lTVzJQL0FBc00yUgpURGdEcG1EbStjN3E2MkJIQWtzUzZWc0k4N0xGUlhMb3BTd3g5WE5ReDlYQmZZeEgrbUpLbHpIV3lqajVXUTRTCjlWaHFzYmM5WlBLaUpiekFZaEZ1YmMwYk5wZmRTZW9PVy9PWHVocU4rTWxGbGNhbXRORUphNnBnTllvRkRRR2kKQ0VwVHBKYUpGZ0xsaE52NHpnQXVKdi8yNlVSM08vR2FyMGVLdjZzQUh1cjNBNnZMWFB0eGpySnBDOUVoOHRidwpvTFA1QU1iSXZuQjMvdERFb0RQVjdNSzgydHZRQ2xOSFk3WC9sMklPOEtWRjBVZnFqcHVXUEkwWEtlNUxLKzlHCllwUFVyc1dNMWNCZ3FiS2ZDRi9FbklDY3VaSi9qWW1xVk9OSmNyU3Q5NjFBRFRBcEFvSUJBUUM1bCtLaWdYTGoKSjg1OXlUbmJhd1pxL0o2R090SEh3dGo3Z2o1eTRJZEJnV2JqU0ZJZCtsOS9ibkhtOWJFRWJEMzhKYWJ5YzZTSwpDSHl0N0g0WXV5UzVEV3VTc3BWZzdoMjJLK3haTHFPTkt0cm1JcDdPRkUxWTk2Y3U0ZnVrMnhxekNLZFNmYm5UCmpZWTJlMXdQblBUNWlXS1pudk1pZXBHSFdoSlRyMFJvd2NVTXpXSVYvdDYxQkNKbUtvV2JXc3hvMHBKbW5vekMKM1ppSTF5dS80RUt4RXQ1Y3k3K2NhM0p1KzR3dFlSY3A3Y1U2b1hQTjhjNUlEMnlYemU2VTZlNSsyaGNCdkh4RQpQYXJFNGs5cm5wR1VyVjFhUTNjUjhac1JZZHhiVENEQVlDRGp2bzhLbUNublRack1DNjBMV2x6Q1kxRDlpbmpNCmdXcElGWHNNMVFLUkFvSUJBRDB5a056VFEwN20rYmJQQzRUUGFzT001algzYURwc2s0ZHhmRUk4QzNPMHVNdXAKVGcwTXhOS2w4bUxhUyt5MFBmOSs0b1MxdWpuRXNtNGZiWTNXR25FZXQ4aEw2NnJPK2lSeU9wRWV0Z05RQkhUSgpSeU90a3hwUWpZK0NKd1VvNm9KMC9sU041ODJ3QlBSYkMrYnNrU005aG94L2x4ZkFGZ0dMczlpbENieG8xcWFHClRob0tLM2RBTmJlaEJCRkNRc0JKM2hrV3c2bnI3TmRkYmZEaFRlcnRsNHVtVVFMRWcxSGRvZXVIRkUvdWxxeHMKeGdhRkJvNWV4d3czTVBFMTRzRlB4MGJadENIT2Y1MmhOTDFwa2xuWHB2bDJjSXZvaThaSWh6ZWdxVmtWaXJDLwpDeTh3MHhseWhsekszSm1oM3phVjl4aDIyYXdWVSszeUhTWGVqbmtDZ2dFQU9sYjFSZkg5SkV5cUN6NUs4cDgwCitFS0tybFVsQm05SWQ5OGNORTVDRmlSUUxGZmFnRlBvMnd6anZ4OHlVdHFYcllCRWQyaEVxNk01Vmc3R0lJNEwKWUNSSTBXZFRyNUdLUTI2Uk1BT0tJK0Q1eUdmUGxhWXFIakpUR2xpdEdzaEpIMGcwR0trdTFjSmlFeFE1L3lwdQprMVpOYVU3ZXpOTE1sa2lKQkVkTzhNTWdad0xVdDJkVHFJRXhNdjVnMjFIeWVXemYybVF5aVRyUkxRcStWT1Z3CjhXcWwvWE9LdXVmSG8vMXN0Z01VSGZrQkM0b2U5Zmp4eUJNWkpxcjBPVmxEd0JwY0t3Nk4zWUdwQVpUR05HVTMKREE1bkR1MndLekxRZE9sWE5GZTgzOXdYMnA5WEpaUnBiNjBrWU1tMnpwL01Fc3JYZGF1bWgxcVRCeS9CYTJvMgpFUUtDQVFCSXZYNXdORTFWZ05qL3ZDOEFEQWZWU0cwdDdrcHAyNGx2Z250TEppM2JKcXJPa1pMdWJQTGxUdDJRCllFTmZTUzlwRmFxMGtpTW1BMXJaMzllOXNTTnhjQjFrSGd3Q2FQMDRuZkRyMm1RTVN3b1V5Y1F3dkFVTW9td0kKUURTVXdWU0tkSFpaWVlpbnRpS2Q0aDRqYnZ4S2p5N2JTci9Fb2c3bXNSdG9QL2NWOUo1SDZNZGZVMHZzK0dscgpVem5QU2ZsSlFPUGR5N2lBWk9VSzVhRmV0Z2swNXgyMDAyMVVIR3p3MjVoRmhGUGxoOS84SDVIbVF4UWN4Z2RRCmVSb2gyU3BqZ2tDaVY3M29qRko3ZXA5R1RZVW9FZU1VUGNBcnhVbk4zemZicmdLamlqaE84ZmRnVHZIalE4eVMKQW45dGZhaG80dU1RNzNBYloxL3dwRmpnK0VtbwotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==
  # tls.crt: "{{ $ns.tlsCrtSecVal }}"
  # tls.key: "{{ $ns.tlsKeySecVal }}"
kind: Secret
metadata:
  name: "{{ $ns.name }}"-tls
  namespace: custom-ingress
  annotations:
    helm.sh/hook: post-install
type: kubernetes.io/tls
{{ end -}}